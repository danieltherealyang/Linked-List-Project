# <center>Delta STIG Automation</center>
This script looks for changes between DISA STIG updates and Jira tickets and modifies the check texts and status of Jira tickets to reflect the new updated DISA STIGs
## <center>Setup Requirements</center>
* [DISA STIGs](https://public.cyber.mil/stigs/compilations/) - Download STIGs from DISA Website
* [Python](https://www.python.org/downloads/) and the following Python packages must be installed - requests, keyring, splinter
    * Install Python packages with the following commands:
```bat
> pip install requests
> pip install keyring
> pip install splinter
```

## <center>Usage</center>
- Open CMD (no quotes when entering paths):
```bash
> cd [path_to_script]\Delta_STIG_Analysis
> python generateConfig.py #run if config.json is not in folder
> python Runme.py #main script
> python purge.py #deletes all files generated by scripts, move generated files to another folder to avoid deletion
```
- Alternative:
```bash
> cd [path_to_script]\Delta_STIG_Analysis
> python generateConfig.py #run if config.json is not in folder
> python unzip.py #unzips DISA STIGS compilation
> python generatePKL.py #pulls issues from Jira and saves them to jiraPickle.pkl
> python analyze.py #parses DISA STIGS and compares them to Jira Issues
> python push2jira.py #pushes necessary changes to Jira
> python purge.py #deletes all files generated by scripts, move generated files to another folder to avoid deletion
```
## <center>Generated Files</center>
* __CSVFiles__ - Folder with all of the CSV files generated by the script
* __CSVFiles/ChangedSTIGS.csv__ - Spreadsheet of Jira issues to be updated by <span>push2jira.py</span> with the following information: VUL-ID, V-KEY, Rule-ID, Old Check Text, and New Check Text
* __CSVFiles/jiraPickle.csv__ - Spreadsheet of Jira issues with the following information: VUL-ID, Group-ID, STIG Vuln ID, STIG Affected System, STIG Discussion, STIG Check Content, STIG Mitigation Notes, STIG Fix Text, STIG Rule ID, and STIG ID
* __CSVFiles/RetiredSTIGS.csv__ - Spreadsheet of Jira issues to be retired by <span>push2jira.py</span> with the following information: VUL-ID, V-KEY, and Rule-ID
* __CSVFiles/SameSTIGS.csv__ - Spreadsheet of Jira issues to remain unchanged with the following information: VUL-ID, V-KEY, and Rule-ID
* __CSVFiles/STIGS.csv__ - Spreadsheet of all the STIG XML files with the following information: STIG Vuln ID, STIG Rule ID, STIG Discussion, STIG Check Content, and STIG Fix Text
* __XML\_Files__ - Folder with all of the XML files copied from the STIGs folders
## <center>Documentation</center>
* __\_\_pycache\_\___ - folder with compiled python bytecode files
* __README__ - folder with READMEs about the script
	* static - folder containing fonts for style.css
	* <span>Delta STIG Automation.md</span> - readme written in markdown language for viewing on git repositories
	* <span>Delta STIG Automation.html</span> - readme in stylized html for viewing locally
	* style.css - css file to format Delta STIG Automation.html
* __<span>analyze.py</span>__ - parses data from the jira and STIG csv files, compares the check texts of the jira issues with the STIGs, and outputs the results into ChangedSTIGS.csv, RetiredSTIGS.csv, and SameSTIGS.csv
* __<span>banner.py</span>__ - displays message banner
* __config.json__ - contains lists of files and folders generated by the script for use when purging
* __<span>copyFiles.py</span>__ - copies xml files from DISA STIGs to  new XML_Files folder and returns the path of the new folder
* __<span>generateConfig.py</span>__ - creates config.json file to mark files and folders for deletion
* __<span>generatePKL.py</span>__ - queries Jira for issues and saves them to jiraPickle.pkl
* __<span>jira2csv.py</span>__ - (__abandoned__) queries Jira and outputs issues directly to a csv file
* __<span>jiraAPI.py</span>__ - copied from DevOps API repo, used to retrieve and send data to Jira
* __<span>moveFiles.py</span>__ - (__unused__) moves XML files to new directory inside current directory
* __<span>pkl2csv.py</span>__ - generates a csv file from a Jira pickle file and saves it as [pickle_file_name].csv to CSVFiles folder
* __<span>purge.py</span>__ - deletes all files generated by script except for jiraPickle.pkl
* __<span>push2jira.py</span>__ - parses data from ChangedSTIGS.csv, RetiredSTIGS.csv, and SameSTIGS.csv and pushes necessary changes to Jira
* __<span>RunMe.py</span>__ - main script
* __<span>stigcompare.py</span>__ - compares the check content of Jira issues with DISA STIGs
* __<span>unzip.py</span>__ - unzips [STIG_compilation_name].zip
* __<span>xml2csv.py</span>__ - generates a csv file from DISA STIGs and saves it as "STIGS.csv" to "CSVFiles" folder

